<div class="container my-5 py-5">
  {{> message}}
  <div class="profile-container pt-5">
    {{!-- Edit profile tab --}}
    <ul class="nav nav-pills flex-columns me-3">
      <li class="nav-item">
        <a class="nav-link text-center {{#is path 'plans'}} active {{/is}}"
          aria-current="page" href="/users/profile/{{userId}}/plans">My Plans</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-center {{#is path 'settings'}} active {{/is}}"
          href="/users/profile/{{userId}}/settings">Settings</a>
      </li>

    </ul>
    <div class="tab-content ms-3" id="v-pills-tabContent">
      {{!-- My plans --}}
      {{#is path 'plans'}}
      <div class="profile-section">
        {{!-- Order Details --}}
        <details>
          <summary>
            <h4 class="profile-subtitle d-inline">Current Plan details</h4>
          </summary>
          <ul class="profile-item my-3">
            <li><strong>Order id:</strong>#{{showId}}</li>
            <li><strong>Ordered at:</strong>{{orderAt}}</li>
            <li><strong>Status:</strong>{{status}}</li>
            <li><strong>Menu:</strong>{{menu}}</li>
            <li><strong>Preference:</strong> <p>{{preference}}</p> </li>
            <li> <strong>Servings:</strong>{{servings}}</li>
            <li> <strong>Meals:</strong>{{meals}} </li>
            <li> <strong>Total: $</strong>{{totalAmount}}</li>
          </ul>
        </details>
        {{!-- Delivery Details --}}
        <details>
          <summary>
            <h4 class="profile-subtitle d-inline">Delivery Details</h4>
          </summary>
          <ul class="profile-item my-3">
            <li> <strong>Name: </strong> {{name}}</li>
            <li> <strong>Email: </strong>{{email}}</li>
            <li> <strong>Phone: </strong>{{phone}}</li>
            <li> <strong>Address: </strong> {{address}}</li>
            <li> <strong>Preferred day: </strong> {{preferredDay}}</li>
            <li> <strong>Preferred day: </strong> {{preferredTime}}</li>
          </ul>
        </details>
      </div>
      {{/is}}
      {{!-- Settings --}}
      {{#is path 'settings'}}
      <div class="profile-section">
        <h4 class="profile-subtitle d-inline">Settings</h4>
        <ul class="profile-item my-3">
          <li> <strong>Name:</strong> {{name}}</li>
          <li> <strong>Email:</strong> {{email}}</li>
          <li><strong>Recurring subscription: </strong> {{#is recurringSub false}} No {{else}} Yes {{/is}} </li>
          <!-- change password button -->
          <li> <button data-bs-toggle="modal" data-bs-target="#changePassword">Change
              Password</button></li>
          <!-- Change Password Modal -->
          <div class="modal fade" id="changePassword" data-bs-backdrop="static"
            data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="changePasswordLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title fw-bold" id="changePasswordLabel"
                    style="letter-spacing: 1px;">Change Password</h5>
                  <button type="button" class="btn-close"
                    data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form class="needs-validation" action="{{#if
                    user}}/users/changePassword/{{user.id}}?_method=PUT{{else}}/{{/if}}"
                    method="post" novalidate>
                    <!-- New Password input -->
                    <div class="form-outline mb-4">
                      <label class="form-label" for="newPassword">New Password</label>
                      <input type="password" id="newPassword" name="newPassword"
                        class="form-control form-control-lg"
                        pattern="^(?=.*\d)(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,16}$"
                        value="{{newPassword}}" required>
                      <div class="invalid-feedback">Please enter your new
                        password.
                        The password must contain at least 8 and maximum 16
                        characters, including at least 1 uppercase, 1 lowercase,
                        and one number.</div>
                    </div>
                    <!--Confirm Password input -->
                    <div class="form-outline mb-4">
                      <label class="form-label" for="confirmNewPassword">Confirm
                        New Password</label>
                      <input type="password" id="confirmNewPassword"
                        name="confirmNewPassword" class="form-control
                        form-control-lg"
                        pattern="^(?=.*\d)(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,16}$"
                        value="{{confirmNewPassword}}" required>
                      <div class="invalid-feedback">Please confirm your new
                        password.</div>
                    </div>
                    <input type="hidden" name="email" value="{{email}}">
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary"
                      data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Confirm</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </ul>
      </div>
      {{/is}}
    </div>

  </div>
</div>
